# 集群 分布式 微服务

现在随着互联网的发展，流量成为互联网产品存活的关键，但是随着流量的提高，对服务器的承受能力是一种极大的挑战。单机结构的服务器承载能力上限较低，整个项目都由这一台服务器提供服务，处理能力有限，业务量增长到一定程度时很容易就出现无法满足业务需求的情况。

之前在的项目组中转型微服务架构，使用Spring全家桶。

本文就是关于微服务的一些基本概念的学习笔记。

微服务的优势和不足：

1. 系统体量大：内部多个模块耦合，出问题会影响整个项目的运行
2. 扩展提升难：部署后出现问题时提升比较困难，只能加配置或者加集群，并且容易出现资源分配不均匀的情况
3. 运维困难：系统功能变更或者升级时需要整个包进行发布，一个小功能的升级就要大费干戈，并且容易导致整个应用运行出现问题



1。集群是什么

> **電腦叢集**（英語：computer cluster）是一組鬆散或緊密連接在一起工作的[電腦](https://zh.wikipedia.org/wiki/%E9%9B%BB%E5%AD%90%E8%A8%88%E7%AE%97%E6%A9%9F)。由於這些電腦協同工作，在許多方面它們可以被視為單個系統。與[網格電腦](https://zh.wikipedia.org/wiki/%E7%BD%91%E6%A0%BC%E8%AE%A1%E7%AE%97)不同，電腦叢集將每個[節點](https://zh.wikipedia.org/w/index.php?title=%E8%8A%82%E7%82%B9_%28%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%29&action=edit&redlink=1)設定為執行相同的任務，由軟體控制和排程。
>
> --------  維基百科，自由的百科全書

简单的说，就是

* 一台服务器性能不够，加一台服务器一起来承担流量；
* 其中一台死机时，另一台可以访问，不易产生宕机的情况。

2。分布式是什么

> 在[電腦科學](https://zh.wikipedia.org/wiki/%E8%A8%88%E7%AE%97%E6%A9%9F%E7%A7%91%E5%AD%B8)中，**分散式運算**（英語：Distributed computing），又譯為**分布式計算**。這個研究領域，主要研究**分散式系統**（Distributed system）如何進行計算。分散式系統是一組[電腦](https://zh.wikipedia.org/wiki/%E9%9B%BB%E5%AD%90%E8%A8%88%E7%AE%97%E6%A9%9F)，透過[網路](https://zh.wikipedia.org/wiki/%E8%A8%88%E7%AE%97%E6%A9%9F%E7%B6%B2%E7%B5%A1)相互連接[傳遞訊息](https://zh.wikipedia.org/wiki/%E8%A8%8A%E6%81%AF%E5%82%B3%E9%81%9E_%28%E8%BB%9F%E9%AB%94%29)與通訊後並協調它們的行為而形成的系統。[\[1\]](https://zh.wikipedia.org/wiki/%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97#cite_note-Coulouris-1)元件之間彼此進行互動以實現一個共同的目標。把需要進行大量計算的工程資料分割成小塊，由多台[電腦](https://zh.wikipedia.org/wiki/%E9%9B%BB%E5%AD%90%E8%A8%88%E7%AE%97%E6%A9%9F)分別計算，再上傳運算結果後，將結果統一合併得出資料結論的科學。分散式系統的例子來自有所不同的[面向服務的架構](https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%9E%B6%E6%9E%84)，[大型多人線上遊戲](https://zh.wikipedia.org/wiki/%E5%A4%A7%E5%9E%8B%E5%A4%9A%E4%BA%BA%E7%B7%9A%E4%B8%8A%E9%81%8A%E6%88%B2)，[對等網路](https://zh.wikipedia.org/wiki/%E5%AF%B9%E7%AD%89%E7%BD%91%E7%BB%9C)應用。
>
> --------  維基百科，自由的百科全書

白话文如下：

* 当服务器集群性能不够的时候，更改组织架构，通过合理的资源分配，使集群得到充分的利用；
* 每个模块之间互相协作的同时，独立运行，便于扩展；
* 复杂业务拆分出多个子业务，同一任务在不同的服务器上同时运行，效率更高。

3。集群/分布式

都是多个计算机共同协作实现同一目标，集群和分布式并不冲突，也可以共同实现，分布式集群

区别是集群为多个计算机做同样的功能和业务，分布式则为把一个业务拆分为多个子业务部署到不同的计算机上。

4。微服务

微服务则为分布式架构的实现方式，把整个的项目拆分为一个个业务模块，每个业务模块可以独立运行，一般来说微服务之间通过API接口进行互相通信以达到协作的能力。



## SpringCloud

SpingCloud提供了对于微服务的分布式架构的一系列完整的解决方案，微服务拆分出多个模块以后，会出现各种不同的问题。

比如服务治理：Eureka；负载均衡：Ribbon；容错保护：Hystrix；声明式服务调用：Feign；API网关服务：Zuul；配置中心：Config；消息总线：Bus；消息驱动的服务：Stream；服务跟踪：Sleuth。

Eureka

可以显式配置健康检查，



















